C51 COMPILER V9.60.7.0   SC92F8003_GPIO                                                    08/30/2023 14:52:08 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE SC92F8003_GPIO
OBJECT MODULE PLACED IN .\Objects\sc92f8003_gpio.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\赛元8003应用资料\SC92F8003 DEMO CODE\SC92F8003_Lib\src\sc92f8003_gpio
                    -.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\赛元8003应用资料\SC92F8003 DEMO CODE\SC92F8003_Lib\inc) DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\sc92f8003_gpio.lst) TABS(2) OBJECT(.\Objects\sc92f8003_gpio.obj)

line level    source

   1          //************************************************************
   2          //  Copyright (c) 深圳市赛元微电子有限公司
   3          //  文件名称  : sc92f8003_gpio.c
   4          //  作者    : 
   5          //  模块功能  : GPIO固件库函数C文件
   6          //  局部函数列表:
   7          //  最后更正日期: 2018/9/4
   8          //  版本    : V1.0 
   9          //  说明        ：  
  10          //*************************************************************
  11          
  12          #include "sc92f8003_gpio.h"
  13          
  14          /**************************************************
  15          *函数名称：void GPIO_DeInit(void)
  16          *函数功能：GPIO相关寄存器复位至缺省值
  17          *入口参数：void
  18          *出口参数：void
  19          **************************************************/
  20          void GPIO_DeInit(void)
  21          {
  22   1        P0CON = 0x00;
  23   1        P1CON = 0x00;
  24   1        P2CON = 0x00;
  25   1        P0PH = 0x00;
  26   1        P1PH = 0x00;
  27   1        P2PH = 0x00;
  28   1        P0 = P1 = P2 = 0;
  29   1      }
  30          
  31          /**************************************************
  32          *函数名称：void GPIO_Init(GPIO_TypeDef GPIOx, uint8_t PortPins, GPIO_Mode_TypeDef GPIO_Mode)
  33          *函数功能：GPIO口模式配置初始化
  34          *入口参数：GPIOx    选择操作的GPIO口（P0,P1,P2）
  35                 PortPins   选择GPIO管脚Pxy
  36                 GPIO_Mode  选择GPIO口模式（高阻输入、上拉输入、推挽输出）
  37          *出口参数：void
  38          **************************************************/
  39          void GPIO_Init(GPIO_TypeDef GPIOx, uint8_t PortPins, GPIO_Mode_TypeDef GPIO_Mode)
  40          {
  41   1        //GPIO0设置
  42   1        if(GPIOx == GPIO0)  
  43   1        {
  44   2          if(GPIO_Mode == GPIO_MODE_IN_HI)  //高阻输入
  45   2          {
  46   3            P0CON &= ~PortPins;
  47   3            P0PH  &= ~PortPins;
  48   3          }
  49   2          if(GPIO_Mode == GPIO_MODE_IN_PU)  //上拉输入
  50   2          {
  51   3            P0CON &= ~PortPins;
  52   3            P0PH  |= PortPins;
  53   3          }
C51 COMPILER V9.60.7.0   SC92F8003_GPIO                                                    08/30/2023 14:52:08 PAGE 2   

  54   2          if(GPIO_Mode == GPIO_MODE_OUT_PP) //推挽输出
  55   2          {
  56   3            P0CON |= PortPins;
  57   3          }   
  58   2        }
  59   1      
  60   1        //GPIO1设置
  61   1        else if(GPIOx == GPIO1)
  62   1        {
  63   2          if(GPIO_Mode == GPIO_MODE_IN_HI)
  64   2          {
  65   3            P1CON &= ~PortPins;
  66   3            P1PH  &= ~PortPins;
  67   3          }
  68   2          if(GPIO_Mode == GPIO_MODE_IN_PU)
  69   2          {
  70   3            P1CON &= ~PortPins;
  71   3            P1PH  |= PortPins;
  72   3          }
  73   2          if(GPIO_Mode == GPIO_MODE_OUT_PP)
  74   2          {
  75   3            P1CON |= PortPins;
  76   3          } 
  77   2        }
  78   1      
  79   1        //GPIO2设置
  80   1        else 
  81   1        {
  82   2          if(GPIOx == GPIO2)
  83   2          {
  84   3            if(GPIO_Mode == GPIO_MODE_IN_HI)
  85   3            {
  86   4              P2CON &= ~PortPins;
  87   4              P2PH  &= ~PortPins;
  88   4            }
  89   3            if(GPIO_Mode == GPIO_MODE_IN_PU)
  90   3            {
  91   4              P2CON &= ~PortPins;
  92   4              P2PH  |= PortPins;
  93   4            }
  94   3            if(GPIO_Mode == GPIO_MODE_OUT_PP)
  95   3            {
  96   4              P2CON |= PortPins;
  97   4            }
  98   3          } 
  99   2        }
 100   1      
 101   1      }
 102          
 103          /**************************************************
 104          *函数名称：void GPIO_Write(GPIO_TypeDef GPIOx, uint8_t PortVal)
 105          *函数功能：GPIO口赋值
 106          *入口参数：GPIOx  选择操作的GPIO口（P0,P1,P2）
 107                 PortVal  GPIO口的值
 108          *出口参数：void
 109          **************************************************/
 110          void GPIO_Write(GPIO_TypeDef GPIOx, uint8_t PortVal)
 111          {
 112   1          if(GPIOx == GPIO0)
 113   1        {
 114   2          P0 = PortVal;
 115   2        }
C51 COMPILER V9.60.7.0   SC92F8003_GPIO                                                    08/30/2023 14:52:08 PAGE 3   

 116   1        if(GPIOx == GPIO1)
 117   1        {
 118   2          P1 = PortVal;
 119   2        }
 120   1        if(GPIOx == GPIO2)
 121   1        { 
 122   2          P2 = PortVal;
 123   2        }
 124   1      }
 125          
 126          /**************************************************
 127          *函数名称：void GPIO_WriteHigh(GPIO_TypeDef GPIOx, uint8_t PortPins)
 128          *函数功能：GPIO口管脚Pxy置位
 129          *入口参数：GPIOx    选择操作的GPIO口（P0,P1,P2）
 130                 PortPins   选择GPIO口管脚Pxy
 131          *出口参数：void
 132          **************************************************/
 133          void GPIO_WriteHigh(GPIO_TypeDef GPIOx, uint8_t PortPins)
 134          {
 135   1        if(GPIOx == GPIO0)
 136   1        {
 137   2          P0 |= PortPins;
 138   2        }
 139   1        if(GPIOx == GPIO1)
 140   1        {
 141   2          P1 |= PortPins;
 142   2        }
 143   1        if(GPIOx == GPIO2)
 144   1        {   
 145   2          P2 |= PortPins; 
 146   2        }  
 147   1      }
 148          
 149          /**************************************************
 150          *函数名称：void GPIO_WriteLow(GPIO_TypeDef GPIOx, uint8_t PortPins)
 151          *函数功能：GPIO口管脚Pxy复位
 152          *入口参数：GPIOx    选择操作的GPIO口（P0,P1,P2）
 153                 PortPins   选择GPIO口管脚Pxy
 154          *出口参数：void
 155          **************************************************/
 156          void GPIO_WriteLow(GPIO_TypeDef GPIOx, uint8_t PortPins)
 157          {
 158   1        if(GPIOx == GPIO0)
 159   1        {
 160   2          P0 &= ~PortPins;
 161   2        }
 162   1        if(GPIOx == GPIO1)
 163   1        {
 164   2          P1 &= ~PortPins;
 165   2        }
 166   1        if(GPIOx == GPIO2)
 167   1        {   
 168   2          P2 &= ~PortPins;  
 169   2        }   
 170   1      }
 171          
 172          /**************************************************
 173          *函数名称：uint8_t GPIO_ReadPort(GPIO_TypeDef GPIOx)
 174          *函数功能：读GPIO口Px的值
 175          *入口参数：GPIOx  选择操作的GPIO口（P0,P1,P2）
 176          *出口参数：uint8_t  返回Px的值
 177          **************************************************/
C51 COMPILER V9.60.7.0   SC92F8003_GPIO                                                    08/30/2023 14:52:08 PAGE 4   

 178          uint8_t GPIO_ReadPort(GPIO_TypeDef GPIOx)
 179          {
 180   1          if(GPIOx == GPIO0)
 181   1        {
 182   2          return P0;
 183   2        }
 184   1        else if(GPIOx == GPIO1)
 185   1        {
 186   2          return P1;
 187   2        }
 188   1        else 
 189   1        { 
 190   2          return P2;  
 191   2        }
 192   1      }
 193          
 194          /**************************************************
 195          *函数名称：BitStatus GPIO_ReadPin(GPIO_TypeDef GPIOx, GPIO_Pin_TypeDef PortPins)
 196          *函数功能：读GPIO口管脚Pxy的值
 197          *入口参数：GPIOx    选择操作的GPIO口（P0,P1,P2）
 198                 PortPins   选择GPIO口管脚Pxy
 199          *出口参数：BitStatus  返回Pxy的值
 200          **************************************************/
 201          BitStatus GPIO_ReadPin(GPIO_TypeDef GPIOx, GPIO_Pin_TypeDef PortPins)
 202          {
 203   1        BitStatus ret = 0;
 204   1        
 205   1        if(GPIOx == GPIO0)
 206   1        {
 207   2          return ((BitStatus)(P0 & PortPins));
 208   2        }
 209   1        else if(GPIOx == GPIO1)
 210   1        {
 211   2          ret = ((BitStatus)(P1 & PortPins));
 212   2          if (ret)
 213   2            return 1;
 214   2          else
 215   2            return 0;
 216   2          //return ret;
 217   2        }
 218   1        else 
 219   1        {
 220   2          return ((BitStatus)(P2 & PortPins));
 221   2        }         
 222   1      }
 223          
 224          /******************* (C) COPYRIGHT 2018 SinOne Microelectronics *****END OF FILE****/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    214    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
